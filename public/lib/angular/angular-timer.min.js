/**
 * angular-timer - v1.0.12 - 2014-03-18 4:02 PM
 * https://github.com/siddii/angular-timer
 *
 * Copyright (c) 2014 Siddique Hameed
 * Licensed MIT <https://github.com/siddii/angular-timer/blob/master/LICENSE.txt>
 */
angular.module("timer",[]).directive("timer",["$compile",function(e){return{restrict:"EAC",replace:false,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",autoStart:"&autoStart"},controller:["$scope","$element","$attrs","$timeout",function(t,n,r,i){function s(){if(t.timeoutId){clearTimeout(t.timeoutId)}}function o(){t.seconds=Math.floor(t.millis/1e3%60);t.secondsS=t.seconds==1?"":"s";t.minutes=Math.floor(t.millis/6e4%60);t.minutesS=t.minutes==1?"":"s";t.hours=Math.floor(t.millis/36e5%24);t.hoursS=t.hours==1?"":"s";t.days=Math.floor(t.millis/36e5/24);t.daysS=t.days==1?"":"s";t.sseconds=t.seconds<10?"0"+t.seconds:t.seconds;t.mminutes=t.minutes<10?"0"+t.minutes:t.minutes;t.hhours=t.hours<10?"0"+t.hours:t.hours;t.ddays=t.days<10?"0"+t.days:t.days}t.autoStart=r.autoStart||r.autostart;if(n.html().trim().length===0){n.append(e("<span>{{millis}}</span>")(t))}else{n.append(e(n.contents())(t))}t.startTime=null;t.endTime=null;t.timeoutId=null;t.countdown=t.countdownattr&&parseInt(t.countdownattr,10)>=0?parseInt(t.countdownattr,10):undefined;t.isRunning=false;t.$on("timer-start",function(){t.start()});t.$on("timer-resume",function(){t.resume()});t.$on("timer-stop",function(){t.stop()});t.$on("timer-clear",function(){t.clear()});t.$on("timer-set-countdown",function(e,n){t.countdown=n});t.start=n[0].start=function(){t.startTime=t.startTimeAttr?new Date(t.startTimeAttr):new Date;t.endTime=t.endTimeAttr?new Date(t.endTimeAttr):null;if(!t.countdown){t.countdown=t.countdownattr&&parseInt(t.countdownattr,10)>0?parseInt(t.countdownattr,10):undefined}s();u();t.isRunning=true};t.resume=n[0].resume=function(){s();if(t.countdownattr){t.countdown+=1}t.startTime=new Date-(t.stoppedTime-t.startTime);u();t.isRunning=true};t.stop=t.pause=n[0].stop=n[0].pause=function(){t.clear();t.$emit("timer-stopped",{millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})};t.clear=n[0].clear=function(){t.stoppedTime=new Date;s();t.timeoutId=null;t.isRunning=false};n.bind("$destroy",function(){s();t.isRunning=false});if(t.countdownattr){t.millis=t.countdownattr*1e3;t.addCDSeconds=n[0].addCDSeconds=function(e){t.countdown+=e;t.$digest();if(!t.isRunning){t.start()}};t.$on("timer-add-cd-seconds",function(e,n){i(function(){t.addCDSeconds(n)})})}else{t.millis=0}o();var u=function(){t.millis=new Date-t.startTime;var e=t.millis%1e3;if(t.endTimeAttr){t.millis=t.endTime-new Date;e=t.interval-t.millis%1e3}if(t.countdownattr){t.millis=t.countdown*1e3}if(t.millis<0){t.stop();t.millis=0;o();return}o();t.timeoutId=setTimeout(function(){u();t.$digest()},t.interval-e);t.$emit("timer-tick",{timeoutId:t.timeoutId,millis:t.millis});if(t.countdown>0){t.countdown--}else if(t.countdown<=0){t.stop()}};if(t.autoStart===undefined||t.autoStart===true){t.start()}}]}}])
